{% extends 'home.html' %}

{% block title %}Upload File{% endblock %}
{% block content %}
<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
  <style>
    input[type=file] {
      display: none;
    }

    .container {
      display: flex;
      flex-direction: column;
      justify-content: center;
      text-align: center;
    }

    .custom-file-upload {
      border: none;
      border-radius: 5px;
      color: #fff;
      cursor: pointer;
      display: block;
      font-size: 18px;
      margin-bottom: 20px;
      transition: all 0.3s ease-in-out;
    }

    .custom-file-upload img {
      width: 150px;
      padding-top: 10px;
    }

    .img-upload {
      display: block;
      max-width: 90%;
    }

    button[type=submit] {
      border: none;
      color: #fff;
      cursor: pointer;
      font-size: 18px;
      max-width: 40%;
      max-height: 40%;
    }

    .detect-button {
      display: none;
      align-items: center;
      justify-content: center;
    }

    .detect-button.active {
      display: block;
      background-color: #eceada;
      align-items: center;
      justify-content: center;
      margin-top: 30px;
    }

    .classify-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

    .centered {
      position: absolute;
    } 
  </style>
</head>

<body>
  <div class="container">
    <p id="lnDHx94x6dCZgvGt" style="color:#735e59;font-family:YAEnTI0o408-0;line-height:1.5em; text-align: left;">
      <span id="mk3kt2DWOQLOXWMc" style="color:#735e59;font-weight:700;">Welcome to the Waste Classifier App. This app allows you to take a picture of garbage and classify it as cardboard, compost, glass, metal, paper, plastic, or trash. Depending on which category it is, the app will suggest the appropriate bin (compost, recycle, or landfill) for disposal.
      </span>
    </p>
    <p id="datYvpdkqc5PGjfg" style="color:#735e59;font-family:YAEnTI0o408-0;line-height:1.5em;text-align: left;">
      <span id="Lld221vOCnnzDTNI" style="color:#735e59;font-weight:700;">To get started, follow these steps:
      </span>
    </p>
    <ol>
      <li id="rR3GIY1K4s7k47WU" style="margin-left:1.7em;color:#735e59;list-style-type:decimal;font-family:YAEnTI0o408-0;line-height:1.5em;text-align:left;">
        <span id="WXI9rprm8aPC05Yh" style="color:#735e59;font-weight:700;">Click on UPLOAD to upload an image
        </span>
      </li>
      <li id="rR3GIY1K4s7k47WU" style="margin-left:1.7em;color:#735e59;list-style-type:decimal;font-family:YAEnTI0o408-0;line-height:1.5em;text-align:left;">
        <span id="WXI9rprm8aPC05Yh" style="color:#735e59;font-weight:700;">Click on CLASSIFY to find out where this item should go
        </span>
      </li>
      <li id="rR3GIY1K4s7k47WU" style="margin-left:1.7em;color:#735e59;list-style-type:decimal;font-family:YAEnTI0o408-0;line-height:1.5em;text-align:left;">
        <span id="WXI9rprm8aPC05Yh" style="color:#735e59;font-weight:700;">Dispose the item in the suggested bin
        </span>
        </li>
    </ol>
    <div class="result-container">
      <form action="/" method="post" enctype="multipart/form-data">
        <p id="dFD07cpYaUdKMJca" style="color:#735e59;font-family:YAEnTI0o408-0;line-height:1.5em;text-align: left;">
          <span id="wcNS82hlkrNw0SMb" style="color:#735e59;font-weight:700;">Select an image of trash to identify which bin it should go in:
          </span>
        </p>
        <label for="file" class="custom-file-upload">
          <img src="/static/upload_button.svg" alt="Upload Button">
        </label>
        <input type="file" name="file" accept="image/*" id="file" onchange="showImage(this)" style="display: none;">
        <div class="uploaded-image" id="uploaded-image" style="display: flex; flex-direction: column; align-items: center;">
          <img id="img-preview" style="max-width: 50%; max-height: 50%;">
          <button type="submit" class="detect-button" id="detect-button">
            <div class="classify-container">
              <img src="/static/classify_button.svg" alt="Classify Button" style="max-width: 50%; max-height: 50%; width: 320px;">
              <div class="centered">CLASSIFY</div>
            </div> 
          </button>
        </div>
      </form>
    </div>       
  <script>
    function showImage(input) {
      if (input.files && input.files[0]) {
        var reader = new FileReader();
        reader.onload = function (e) {
          document.getElementById('img-preview').setAttribute('src', e.target.result);
          document.getElementById('detect-button').classList.add('active');
        }
        reader.readAsDataURL(input.files[0]);
      }
    }
  </script>
  {% endblock %}